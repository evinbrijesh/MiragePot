# Simplified Ollama Dockerfile for MiragePot
# Model will be downloaded at runtime instead of build time

FROM ollama/ollama:latest

# Set labels
LABEL maintainer="Evin Brijesh"
LABEL description="Ollama server for MiragePot (model downloads at startup)"

# Expose Ollama port
EXPOSE 11434

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:11434/api/tags || exit 1

# Use the native ollama serve command
# The base image has ENTRYPOINT ["/bin/ollama"], so this runs: /bin/ollama serve
CMD ["serve"]
