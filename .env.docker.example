# =============================================================================
# MiragePot Docker Deployment Configuration
# =============================================================================
# Copy this file to .env.docker and customize for your deployment
# All values shown are sensible defaults for production use

# =============================================================================
# SSH Honeypot Settings
# =============================================================================

# Address to bind the SSH server (0.0.0.0 = all interfaces)
MIRAGEPOT_SSH_HOST=0.0.0.0

# Port for the SSH honeypot
# Note: Inside container this is always 2222, but you can map to host port 22 in docker-compose.yml
MIRAGEPOT_SSH_PORT=2222

# SSH banner to present to clients (mimics real SSH servers)
MIRAGEPOT_SSH_BANNER=SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.5

# Path to SSH host key (auto-generated if not exists)
MIRAGEPOT_HOST_KEY=./data/host.key

# =============================================================================
# LLM/Ollama Settings
# =============================================================================

# Ollama host (use container name when running in Docker)
OLLAMA_HOST=http://ollama:11434

# Ollama model to use for generating responses
# Recommended: phi3 (good balance of speed and quality)
# Alternatives: llama2, mistral, codellama
MIRAGEPOT_LLM_MODEL=phi3

# Timeout for LLM requests (seconds)
MIRAGEPOT_LLM_TIMEOUT=30.0

# LLM temperature (0.0 = deterministic, 1.0 = creative)
MIRAGEPOT_LLM_TEMPERATURE=0.7

# Maximum tokens in LLM response
MIRAGEPOT_LLM_MAX_TOKENS=512

# How often to re-check Ollama connection (seconds)
MIRAGEPOT_LLM_CHECK_INTERVAL=30.0

# =============================================================================
# Honeypot Identity Settings
# =============================================================================

# Fake hostname presented to attackers
MIRAGEPOT_HOSTNAME=webserver-prod-01

# Fake OS name
MIRAGEPOT_OS_NAME=Ubuntu

# Fake OS version
MIRAGEPOT_OS_VERSION=20.04.6 LTS

# Fake kernel version
MIRAGEPOT_KERNEL_VERSION=5.15.0-86-generic

# =============================================================================
# Security & Rate Limiting Settings
# =============================================================================

# Maximum concurrent connections from a single IP
# Prevents resource exhaustion attacks
MIRAGEPOT_MAX_CONNECTIONS_PER_IP=3

# Maximum total concurrent connections
# Global limit across all IPs
MIRAGEPOT_MAX_TOTAL_CONNECTIONS=50

# Time window for connection tracking (seconds)
# Connections older than this are cleaned up
MIRAGEPOT_CONNECTION_TIME_WINDOW=60

# Duration to block abusive IPs (seconds)
# IPs that exceed connection limits are blocked for this duration
MIRAGEPOT_BLOCK_DURATION=300

# Maximum session duration (seconds)
# Sessions longer than this are automatically terminated
# Set to 0 for unlimited (not recommended)
MIRAGEPOT_MAX_SESSION_DURATION=3600

# Log passwords to console (true/false)
# WARNING: Only enable in secure environments
# Passwords are always logged to session JSON files
MIRAGEPOT_LOG_PASSWORDS=false

# =============================================================================
# Logging Settings
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
MIRAGEPOT_LOG_LEVEL=INFO

# Log format (Python logging format string)
MIRAGEPOT_LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# =============================================================================
# Metrics & Monitoring Settings
# =============================================================================

# Enable Prometheus metrics endpoint
MIRAGEPOT_METRICS_ENABLED=true

# Port for metrics endpoint (inside container)
MIRAGEPOT_METRICS_PORT=9090

# Metrics update interval (seconds)
MIRAGEPOT_METRICS_UPDATE_INTERVAL=10

# =============================================================================
# Alert System Settings
# =============================================================================

# Enable alert system
MIRAGEPOT_ALERTS_ENABLED=true

# Alert on commands with threat score above this threshold
ALERT_THRESHOLD_THREAT_SCORE=80

# Alert if a single IP connects more than this many times
ALERT_THRESHOLD_CONNECTIONS_PER_IP=10

# Minimum time between alerts for the same IP (minutes)
# Prevents alert spam
ALERT_COOLDOWN_MINUTES=15

# =============================================================================
# Email Alert Settings
# =============================================================================

# Enable email alerts
ALERT_EMAIL_ENABLED=true

# Email recipients (comma-separated for multiple)
ALERT_EMAIL_TO=security@yourcompany.com

# Email sender
ALERT_EMAIL_FROM=miragepot@yourcompany.com

# SMTP server configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true

# SMTP authentication
# For Gmail: Use an "App Password" not your regular password
# Generate at: https://myaccount.google.com/apppasswords
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password-here

# Email subject prefix
ALERT_EMAIL_SUBJECT_PREFIX=[MiragePot Alert]

# =============================================================================
# Slack Alert Settings
# =============================================================================

# Enable Slack webhook alerts
ALERT_SLACK_ENABLED=false

# Slack webhook URL
# Create webhook at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/HERE

# Slack channel (optional, webhook has default)
SLACK_CHANNEL=#security-alerts

# Slack username for bot
SLACK_USERNAME=MiragePot

# =============================================================================
# Discord Alert Settings
# =============================================================================

# Enable Discord webhook alerts
ALERT_DISCORD_ENABLED=false

# Discord webhook URL
# Create webhook in: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK/HERE

# Discord username for bot
DISCORD_USERNAME=MiragePot

# =============================================================================
# Grafana Settings
# =============================================================================

# Grafana admin password (change this!)
GRAFANA_ADMIN_PASSWORD=admin

# Grafana data retention (days)
GRAFANA_DATA_RETENTION_DAYS=30

# =============================================================================
# Prometheus Settings
# =============================================================================

# Prometheus data retention period
PROMETHEUS_RETENTION_TIME=30d

# Prometheus scrape interval (how often to collect metrics)
PROMETHEUS_SCRAPE_INTERVAL=15s

# =============================================================================
# Dashboard Settings
# =============================================================================

# Dashboard bind address
MIRAGEPOT_DASHBOARD_HOST=0.0.0.0

# Dashboard port (inside container)
MIRAGEPOT_DASHBOARD_PORT=8501

# Auto-refresh interval (seconds)
MIRAGEPOT_DASHBOARD_REFRESH=5

# =============================================================================
# Data Retention & Backup
# =============================================================================

# Automatically archive logs older than this (days)
# Set to 0 to disable auto-archival
LOG_RETENTION_DAYS=30

# Backup directory (outside container)
BACKUP_DIR=./backups

# Enable automatic daily backups
AUTO_BACKUP_ENABLED=true

# Backup retention (keep last N backups)
BACKUP_RETENTION_COUNT=7

# =============================================================================
# Advanced Settings (don't change unless you know what you're doing)
# =============================================================================

# Number of worker threads for handling connections
MIRAGEPOT_WORKER_THREADS=10

# Enable debug mode (very verbose logging)
MIRAGEPOT_DEBUG=false

# Disable AI responses (cache-only mode for testing)
MIRAGEPOT_AI_DISABLED=false
